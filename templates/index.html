{% extends "base.html" %}

{% block content %}
<main>
  <div class="search-container">
    <!-- Formulario de búsqueda -->
    <form method="get" action="/">
      <input 
        type="text" 
        name="q" 
        placeholder="Ingrese su número de CUENTA PREDIAL" 
        required
      >
      <button type="submit">Buscar</button>
    </form>

    <!-- Mensaje si no se encuentra la cuenta -->
    {% if q and not result %}
      <div class="card warning">
        <h3>Cuenta no encontrada</h3>
        <p>No se localizó la cuenta <strong>{{ q }}</strong> en la base de datos.</p>
      </div>
    {% endif %}

    <!-- Resultados -->
    {% if result %}
      <div class="card">
        <h3>Resultado</h3>
        <ul class="info">
          <li><strong>Cuenta predial:</strong> {{ result.CUENTA_PREDIAL }}</li>
          <li><strong>Nombre del titular:</strong> {{ result.NOMBRE_TITULAR or "—" }}</li>
          <li><strong>Adeudo:</strong> ${{ "%.2f"|format(result.ADEUDO) }}</li>
          <li><strong>Fecha vigencia:</strong> {{ result.FECHA_VIGENCIA or "—" }}</li>
          <li><strong>Estado:</strong>
            <span class="badge {{ 'ok' if result.status == 'VIGENTE' else 'no' }}">
              {{ result.status }}
            </span>
          </li>
        </ul>
        <br>
        <a href="/descargar/{{ result.CUENTA_PREDIAL }}" class="btn-download">
          Descargar certificado PDF
        </a>
      </div>
    {% endif %}
  </div>
</main>
{% endblock %}
