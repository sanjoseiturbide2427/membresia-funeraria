{% extends "base.html" %}

{% block content %}
<main>
  <div class="search-container">
    <!-- Formulario de búsqueda -->
    <form method="get" action="/">
      <input 
        type="text" 
        name="q" 
        placeholder="Ingrese su número de cuenta catastral" 
        required
      >
      <button type="submit">Buscar</button>
    </form>

    <!-- Mensaje si no se encuentra la cuenta -->
    {% if q and not result %}
      <div class="card warning">
        <h3>Cuenta no encontrada</h3>
        <p>No se localizó la cuenta <strong>{{ q }}</strong> en la base de datos local.</p>
      </div>
    {% endif %}

    <!-- Resultados -->
    {% if result %}
      <div class="card">
        <h3>Resultado</h3>
        <ul class="info">
          <li><strong>Cuenta:</strong> {{ result.cuenta }}</li>
          <li><strong>Propietario:</strong> {{ result.propietario or "—" }}</li>
          <li><strong>Domicilio:</strong> {{ result.domicilio or "—" }}</li>
          <li><strong>Adeudo:</strong> ${{ "%.2f"|format(result.adeudo) }}</li>
          <li><strong>Fecha actualización:</strong> {{ result.fecha_actualizacion or "—" }}</li>
          <li><strong>Estado:</strong>
            <span class="badge {{ 'ok' if result.status == 'VIGENTE' else 'no' }}">{{ result.status }}</span>
          </li>
        </ul>
      </div>
    {% endif %}
  </div>
</main>
{% endblock %}

